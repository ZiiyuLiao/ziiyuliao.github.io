<!DOCTYPE html>
<html lang="zh-tw">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ziiyuliao.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Dockerfile和Docker Compose有什麼差別？  簡單的來說  Dockerfile是用來描述一個映像檔應該長的什麼樣子 Docker Compose則是用來描述一個Service(服務)應該怎麼來組成例如：在架設網站的時候你可能會用到Tomcat、MySQL等不同的容器，而Docker Compose的描述檔就是用來設定這些容器之間的關聯，諸如誰要先啟動、Port要怎麼設定等等">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker Compose - 安裝、指令筆記">
<meta property="og:url" content="http://ziiyuliao.github.io/2021/04/08/docker-compose-guide/index.html">
<meta property="og:site_name" content="JL 蝦七八筆記">
<meta property="og:description" content="Dockerfile和Docker Compose有什麼差別？  簡單的來說  Dockerfile是用來描述一個映像檔應該長的什麼樣子 Docker Compose則是用來描述一個Service(服務)應該怎麼來組成例如：在架設網站的時候你可能會用到Tomcat、MySQL等不同的容器，而Docker Compose的描述檔就是用來設定這些容器之間的關聯，諸如誰要先啟動、Port要怎麼設定等等">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2021-04-08T03:43:33.000Z">
<meta property="article:modified_time" content="2021-04-08T07:08:22.680Z">
<meta property="article:author" content="Joey Liao">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://ziiyuliao.github.io/2021/04/08/docker-compose-guide/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-tw'
  };
</script>

  <title>Docker Compose - 安裝、指令筆記 | JL 蝦七八筆記</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">JL 蝦七八筆記</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">蝦記</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-tw">
    <link itemprop="mainEntityOfPage" href="http://ziiyuliao.github.io/2021/04/08/docker-compose-guide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Joey Liao">
      <meta itemprop="description" content="隨意紀錄網路上看到的大神文章，僅供自己使用">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JL 蝦七八筆記">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Docker Compose - 安裝、指令筆記
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-04-08 11:43:33 / Modified: 15:08:22" itemprop="dateCreated datePublished" datetime="2021-04-08T11:43:33+08:00">2021-04-08</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Dockerfile和Docker Compose有什麼差別？</p>
<blockquote>
<p>簡單的來說</p>
<ul>
<li>Dockerfile是用來描述一個映像檔應該長的什麼樣子</li>
<li>Docker Compose則是用來描述一個Service(服務)應該怎麼來組成<br>例如：在架設網站的時候你可能會用到Tomcat、MySQL等不同的容器，而Docker Compose的描述檔就是用來設定這些容器之間的關聯，諸如誰要先啟動、Port要怎麼設定等等的，用Docker Compose的方式可以一次帶起所有的服務 (即管理多個Container)，不需一個一個執行</li>
</ul>
</blockquote>
<span id="more"></span>

<h1 id="官方範例"><a href="#官方範例" class="headerlink" title="官方範例"></a>官方範例</h1><p>Docker Compose標準的配置檔案(docker-compose.yml)是採用YAML的格式撰寫，內容如下所示(官方參考範例)。<br>每個Service可以視為一個Container，也就是一個服務，以此範例來說，這個組態檔中定義了db、wordpress所需要服務設定。</p>
<blockquote>
<p>註：YAML的撰寫規範不在本文的說明當中，例如空格、對齊、Key/Value、大小寫等等的用法，請自行注意或參考網路上的文件說明</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 官方範例</span></span><br><span class="line">version: <span class="string">&#x27;3.3&#x27;</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">   db: <span class="comment"># 服務名稱一，可自訂名稱</span></span><br><span class="line">     image: mysql:5.7</span><br><span class="line">     volumes:</span><br><span class="line">       - db_data:/var/lib/mysql</span><br><span class="line">     restart: always</span><br><span class="line">     environment:</span><br><span class="line">       MYSQL_ROOT_PASSWORD: somewordpress</span><br><span class="line">       MYSQL_DATABASE: wordpress</span><br><span class="line">       MYSQL_USER: wordpress</span><br><span class="line">       MYSQL_PASSWORD: wordpress</span><br><span class="line"></span><br><span class="line">   wordpress: <span class="comment"># 服務名稱二，可自訂名稱</span></span><br><span class="line">     depends_on:</span><br><span class="line">       - db</span><br><span class="line">     image: wordpress:latest</span><br><span class="line">     ports:</span><br><span class="line">       - <span class="string">&quot;8000:80&quot;</span></span><br><span class="line">     restart: always</span><br><span class="line">     environment:</span><br><span class="line">       WORDPRESS_DB_HOST: db:3306</span><br><span class="line">       WORDPRESS_DB_USER: wordpress</span><br><span class="line">       WORDPRESS_DB_PASSWORD: wordpress</span><br><span class="line">       WORDPRESS_DB_NAME: wordpress</span><br><span class="line">volumes:</span><br><span class="line">    db_data: &#123;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>因Docker Compose的參數、應用相當的多，無法在短短的一篇文章中詳細的說明，本文會以新手入門的角度切入，搭配官方的範例，概述Docker Compose的組態檔架構，以利新手後續的學習</p>
</blockquote>
<h1 id="安裝Docker-Compose"><a href="#安裝Docker-Compose" class="headerlink" title="安裝Docker Compose"></a>安裝Docker Compose</h1><p>在官方的<a target="_blank" rel="noopener" href="https://docs.docker.com/compose/install/">安裝文件</a>說明中，有各平台的安裝方式，在本文將以Linux Ubuntu為例來進行示範<br>把版本號1.27.4換成你想要的版本，原則上還是越新版本越好，然後執行以下二行指令即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L https://github.com/docker/compose/releases/download/1.27.4/docker-compose-`uname -s`-`uname -m` -o /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>

<p>最後可以執行以下指令來查看安裝後的版本號</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose version (or -version / –version)</span><br></pre></td></tr></table></figure>

<h1 id="頂級層級元素-top-level-element"><a href="#頂級層級元素-top-level-element" class="headerlink" title="頂級層級元素(top-level element)"></a>頂級層級元素(top-level element)</h1><p>由於Docker Compose的組態檔變化其實還蠻多的，但大致上比較常見可以分為：version、services、networks、volumes等幾個部份，因此，本文將著重在這些元素的解釋，<strong>並配合上面的官方範例進行說明，以求新手可以快速建立Docker Compose撰寫架構</strong>，至於詳細的撰寫規定及更多的用法，可參考官方的文件。</p>
<h2 id="version"><a href="#version" class="headerlink" title="version"></a>version</h2><p>用來指定Docker Compose的架構版本，可參考<a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/">官方的列表</a>，不同的版本支援的語法或元素標籤可能會有所不同對應的Docker Egine版本也不同，可以使用docker version指令來檢查Docker Egine的版本，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&#x27;3.3&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="services"><a href="#services" class="headerlink" title="services"></a>services</h2><p>設定各服務(容器)的參數與值，例如，可以定義上述範例中的db、wordpress這二個服務應該長什麼樣子，一般而言，常見的搭配服務層級(service level)元件有以下幾個：</p>
<h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><p>指定服務的映像檔名稱或映像檔ID，例如 db 這個service的映像檔來源是mysql的5.7版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">   db:</span><br><span class="line">     image: mysql:5.7</span><br></pre></td></tr></table></figure>

<h3 id="volumes"><a href="#volumes" class="headerlink" title="volumes"></a>volumes</h3><p>即掛載目錄或者已存在的資料volume，基本的格式為<strong>HOST:CONTAINER</strong>，和Docker的參數-v用途相同，都是把實體主機的資料夾 HOST 連通到 CONTAINER 的資料夾路徑。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">volumes:</span><br><span class="line">  - db_data:/var/lib/mysql <span class="comment"># 掛載已定義好的volume db_data，請參考volumes頂級元素說明</span></span><br><span class="line">  - /opt/data:/var/lib/demo <span class="comment"># 本機/opt/data連通到Container的/var/lib/demo</span></span><br><span class="line">  - /var/lib/demo <span class="comment"># 只指定容器內的資料夾路徑，此案例本機會自動產生連通的目錄</span></span><br></pre></td></tr></table></figure>

<p>如果只設定容器內的資料夾路徑，而沒有指定本機路徑，則本機的Volume是會自動產生的，可以利用以下指令來查詢</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect -f <span class="string">&#x27;&#123;&#123;.Mounts&#125;&#125;&#x27;</span> 容器名稱/容器ID</span><br></pre></td></tr></table></figure>

<h3 id="restart"><a href="#restart" class="headerlink" title="restart"></a>restart</h3><p>設定Container重新啟動的規則，目前支援no、always、on-failure、unless-stopped等四個選項，一般會設為「always」，即當Container停止或開機時可以自動啟動Container</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">restart: always</span><br></pre></td></tr></table></figure>

<h3 id="environment"><a href="#environment" class="headerlink" title="environment"></a>environment</h3><p>定義容器內的環境變數，類似docker run -e的效果，以下二種寫法皆可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">environment:</span><br><span class="line">  MYSQL_USER: wordpress</span><br><span class="line">  MYSQL_PASSWORD: wordpress</span><br><span class="line">  RACK_ENV: development</span><br><span class="line">  SHOW: <span class="string">&quot;true&quot;</span> <span class="comment"># 建議如果是布林值的話，則加入引號</span></span><br><span class="line">  USER_INPUT:</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">environment:</span><br><span class="line">  - MYSQL_USER=wordpress</span><br><span class="line">  - MYSQL_PASSWORD=wordpress</span><br><span class="line">  - RACK_ENV=development</span><br><span class="line">  - SHOW=<span class="literal">true</span></span><br><span class="line">  - USER_INPUT</span><br></pre></td></tr></table></figure>

<h3 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a>depends_on</h3><p>設定容器間的依賴關係，即決定容器啟動的先後順序，以範例而言，wordpress依賴db服務，換言之就是db服務先啟動後才換wordpress啟動</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">   db: <span class="comment"># 服務名稱一</span></span><br><span class="line">     image: mysql:5.7</span><br><span class="line">     volumes:</span><br><span class="line">       - db_data:/var/lib/mysql</span><br><span class="line">     restart: always</span><br><span class="line"></span><br><span class="line">   wordpress: <span class="comment"># 服務名稱二</span></span><br><span class="line">     depends_on: <span class="comment"># 依賴 db 服務</span></span><br><span class="line">       - db</span><br><span class="line">     image: wordpress:latest</span><br><span class="line">     ports:</span><br><span class="line">       - <span class="string">&quot;8000:80&quot;</span></span><br><span class="line">     restart: always</span><br></pre></td></tr></table></figure>

<h3 id="ports"><a href="#ports" class="headerlink" title="ports"></a>ports</h3><p>用來定義本機與容器間Port的對映關係，基本的格式也是HOST:CONTAINER，和volumes的概念一樣，也可以不指定本機的Port，此狀況本機會自動隨機產生對映的Port，一般的寫法如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">restart: always</span><br></pre></td></tr></table></figure>

<p>所以，以本次的例子來看，wordpress這個服務設定了8000 Port來對映容器內部的80 Port</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wordpress: <span class="comment"># 服務名稱</span></span><br><span class="line">     depends_on:</span><br><span class="line">       - db</span><br><span class="line">     image: wordpress:latest</span><br><span class="line">     ports: <span class="comment"># 設定本機Port和容器Port間的對映關係</span></span><br><span class="line">       - <span class="string">&quot;8000:80&quot;</span></span><br><span class="line">     restart: always</span><br></pre></td></tr></table></figure>

<h2 id="networks"><a href="#networks" class="headerlink" title="networks"></a>networks</h2><p>網路連線的相關設定，例如可設定不同的Container運行在同一個網路中，當沒有指定網路環境時，預設Docker Compose會自動建立default network，其名稱為「目錄名稱_default」，換言之，networks是可以省略的，當然，networks的用法說實話也沒有這麼簡單，它還有各種延伸的連線方式、設定或應用等，詳細用法仍然建議參考官方文件，在本文中，先以架構性的說明為主。</p>
<p>因上面的範例中沒有networks的元素，所以我改寫了官方提供的其他範例給大家參考，在此範例中，服務「frontend」用的是front-tier、back-tier這二個網路，而「backend」用的則是back-tier網路。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">   db: <span class="comment"># 服務名稱一</span></span><br><span class="line">     image: mysql:5.7</span><br><span class="line">     volumes:</span><br><span class="line">       - db_data:/var/lib/mysql</span><br><span class="line">     restart: always</span><br><span class="line"></span><br><span class="line">   wordpress: <span class="comment"># 服務名稱二</span></span><br><span class="line">     depends_on: <span class="comment"># 依賴 db 服務</span></span><br><span class="line">       - db</span><br><span class="line">     image: wordpress:latest</span><br><span class="line">     ports:</span><br><span class="line">       - <span class="string">&quot;8000:80&quot;</span></span><br><span class="line">     restart: always</span><br></pre></td></tr></table></figure>

<p>指令<strong>docker network ls</strong>可以用來檢視網路列表，若要查看某個容量所對應的網路配置，則可以利用**docker network inspect &lt; Network ID or Name &gt;**來查得</p>
<h2 id="volumes-1"><a href="#volumes-1" class="headerlink" title="volumes"></a>volumes</h2><p>儲存空間的相關設定，用來實現持久性數據的儲存，簡單的來說，設定volumes通常是為了避免Container被移除後導致資料遺失，所以才需要把資料夾掛載出來，此元素亦可以省略。以是下來自官方的其他範例，這範例主要在說明不同的服務，可以共用相同的volumes名稱，如下方範例之 <strong>db-data</strong>，可參考其註解說明：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">  backend:</span><br><span class="line">    image: awesome/database</span><br><span class="line">    volumes:</span><br><span class="line">      - db-data:/etc/data <span class="comment"># 設定volume</span></span><br><span class="line"></span><br><span class="line">  backup:</span><br><span class="line">    image: backup-service</span><br><span class="line">    volumes:</span><br><span class="line">      - db-data:/var/lib/backup/data <span class="comment"># 設定volume</span></span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  db-data: <span class="comment"># 共用db-data這個volume</span></span><br></pre></td></tr></table></figure>

<h1 id="Docker-Compose-動手做做看"><a href="#Docker-Compose-動手做做看" class="headerlink" title="Docker Compose 動手做做看"></a>Docker Compose 動手做做看</h1><p>在經過上面的解說後，讓我們直接執行看看吧，這樣會比較有感覺，步驟如下：</p>
<h2 id="1-先建立一個專案資料夾"><a href="#1-先建立一個專案資料夾" class="headerlink" title="1.先建立一個專案資料夾"></a>1.先建立一個專案資料夾</h2><p>建立資料夾便於管控我們的檔案，在此假設我們建立一個名為「mydemo」的資料夾</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir mydemo</span><br></pre></td></tr></table></figure>

<h2 id="2-編輯docker-compose-yml"><a href="#2-編輯docker-compose-yml" class="headerlink" title="2.編輯docker-compose.yml"></a>2.編輯docker-compose.yml</h2><p>進入「mydemo」目錄並用自己的習慣的編輯器建立「docker-compose.yml」檔案，檔案內容為上述的官方範例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 官方範例</span></span><br><span class="line">version: <span class="string">&#x27;3.3&#x27;</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">   db: <span class="comment"># 服務名稱一，可自訂名稱</span></span><br><span class="line">     image: mysql:5.7</span><br><span class="line">     volumes:</span><br><span class="line">       - db_data:/var/lib/mysql</span><br><span class="line">     restart: always</span><br><span class="line">     environment:</span><br><span class="line">       MYSQL_ROOT_PASSWORD: somewordpress</span><br><span class="line">       MYSQL_DATABASE: wordpress</span><br><span class="line">       MYSQL_USER: wordpress</span><br><span class="line">       MYSQL_PASSWORD: wordpress</span><br><span class="line"></span><br><span class="line">   wordpress: <span class="comment"># 服務名稱二，可自訂名稱</span></span><br><span class="line">     depends_on:</span><br><span class="line">       - db</span><br><span class="line">     image: wordpress:latest</span><br><span class="line">     ports:</span><br><span class="line">       - <span class="string">&quot;8000:80&quot;</span></span><br><span class="line">     restart: always</span><br><span class="line">     environment:</span><br><span class="line">       WORDPRESS_DB_HOST: db:3306</span><br><span class="line">       WORDPRESS_DB_USER: wordpress</span><br><span class="line">       WORDPRESS_DB_PASSWORD: wordpress</span><br><span class="line">       WORDPRESS_DB_NAME: wordpress</span><br><span class="line">volumes:</span><br><span class="line">    db_data: &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-執行docker-compose-yml"><a href="#3-執行docker-compose-yml" class="headerlink" title="3.執行docker-compose.yml"></a>3.執行docker-compose.yml</h2><p>執行以下指令，即可利用docker-compose.yml檔帶起所有的服務，其中 <strong>-d</strong> 代表是在背景執行，如果執行時出現權限不夠的問題，請在指令前加入<strong>sudo</strong>再執行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>由下圖可以看到執行指令後會自動依 docker-compose.yml 的內容來動作</p>
<ol>
<li>首先會先下載 MySQL(即db服務)</li>
<li>拉取 WordPress 服務的 Image，因為在 docker-compose.yml 中我們並沒有設定Name，所以結尾時會自動幫我們建立</li>
<li>執行完成後，可以檢查一下，用下面的指令可以看的出來Container都已經準備好了，Name也如上圖所說已自動建好名稱，分別為「mydemo_db_1」與「mydemo_wordpress_1」<blockquote>
<p>註：加format的參數是為了篩選一下輸出的欄位，各位也可以直接用「docker ps」來查看即可</p>
</blockquote>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps --format <span class="string">&quot;table &#123;&#123;.ID&#125;&#125;:\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="4-連線至-WordPress"><a href="#4-連線至-WordPress" class="headerlink" title="4.連線至 WordPress"></a>4.連線至 WordPress</h2><p>依照docker-compose中的設定，Wordpress服務是對外開放8000 Port (對映至Container的 80 Port)，所以連線的時候用瀏覽器輸入以下的網址格式來連線即可 (把 your-ip 換成你真正的IP)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://your-ip:8000</span><br></pre></td></tr></table></figure>

<h2 id="5-查看網路資訊"><a href="#5-查看網路資訊" class="headerlink" title="5.查看網路資訊"></a>5.查看網路資訊</h2><p>在前面有提到，如果YAML檔沒有指定網路環境時，預設會自動建立default network，其名稱為 <strong>目錄名稱_default</strong> ，透過下面的指令可以來查驗一下是否屬實，下方的「cce」是Wordpress Container ID的開頭前3個數字，各位換成自己的Container ID即可</p>
<blockquote>
<p>註：說明一下grep後面的參數意義，-n顯示行號、-A + 數字代表以搜尋到關鍵字的那一行為基本，再往後顯示「數字」的行數，以此例來看，是再多呈現5行，default則是此次欲搜尋的關鍵字</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect cce | grep -n -A 5 default</span><br></pre></td></tr></table></figure>

<h2 id="6-查看資料掛載的資料夾"><a href="#6-查看資料掛載的資料夾" class="headerlink" title="6.查看資料掛載的資料夾"></a>6.查看資料掛載的資料夾</h2><p>在官方範例中，不管是db或是wordpress的service，他們都是把容器內的資料夾統一指向「db_data」，並沒有特別指定到哪個本機資料夾中，這代表Docker在執行時會自動產生對映的目錄，那麼這個目錄在哪呢？如上述service level的「volumes」介紹所提，可以利用以下二種方式查看：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># cce 換成你自己的Container ID</span><br><span class="line">docker inspect cce | grep -A 10 Mounts</span><br><span class="line">docker inspect -f &#39;&#123;&#123;.Mounts&#125;&#125;&#39; cce</span><br></pre></td></tr></table></figure>

<h2 id="7-刪除Container後資料還在嗎？"><a href="#7-刪除Container後資料還在嗎？" class="headerlink" title="7.刪除Container後資料還在嗎？"></a>7.刪除Container後資料還在嗎？</h2><p>接下來做個實驗，試著把Container移除，再來看看資料是否還會存在？Volume會怎麼變化？移除Container的指令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down <span class="comment"># 移除Container，此時Wordpress已無法連線</span></span><br></pre></td></tr></table></figure>
<p>當移除Container後，使用<strong>docker-compose ps -a</strong>來證明Container已被移除，且同時進入剛剛第6步驟的本機掛載目錄查看，可以發現資料都還是正常存在的，只是此時Container已被移除，因此Wordpress已無法連線</p>
<h2 id="8-重新執行Container後資料是否會正常？"><a href="#8-重新執行Container後資料是否會正常？" class="headerlink" title="8.重新執行Container後資料是否會正常？"></a>8.重新執行Container後資料是否會正常？</h2><p>那麼，試想一下，如果此時重新執行<strong>docker-compose up -d</strong>帶起服務後，之前的資料存取、Wordpress連線是否都正常呢？<br>在這個測試中，可以發現因為之前的Container已經被刪除，因此重啟之後各服務會被分配一個新的ID，分配到本機的Volume目錄也不相同了，舊的Volume目錄是「8ba」開頭的，而新的則為「e56」開頭，由下圖可知，這二個目錄都是存在的，而且進入「e56」的目錄，裡面同樣是有Wordpress相關的檔案資料</p>
<h1 id="Docker-Compose-常用指令列表"><a href="#Docker-Compose-常用指令列表" class="headerlink" title="Docker Compose 常用指令列表"></a>Docker Compose 常用指令列表</h1><p>使用<strong>docker-compose -h</strong>可以查看Docker Compose可以用的指令、參數，以下列出一些比較常用的供大家參考</p>
<blockquote>
<p>註：docker-compose的用法其實和docker指令大同小異，若一些指令不熟的話，可以參考一下文末附上的文章</p>
</blockquote>
<table>
<thead>
<tr>
<th>參數</th>
<th>範例</th>
<th>說明</th>
</tr>
</thead>
<tbody><tr>
<td>ps</td>
<td>docker-compose ps</td>
<td>查看Container的狀態</td>
</tr>
<tr>
<td>stop</td>
<td>docker-compose stop</td>
<td>停止Container，但不會移除。可以用docker-compose start再重新啟動</td>
</tr>
<tr>
<td>start</td>
<td>docker-compose start</td>
<td>啟動Container，可搭配docker-compose stop使用</td>
</tr>
<tr>
<td>restart</td>
<td>docker-compose restart</td>
<td>重新啟動Container</td>
</tr>
<tr>
<td>down</td>
<td>docker-compose down / docker-compose down -v</td>
<td>會把Container、Netwrok等移除，通常和docker-compose up搭配。參數-v會把Compose檔中所建立的volume刪除</td>
</tr>
<tr>
<td>up</td>
<td>docker-compose up / docker-compose up -d</td>
<td>建立、執行Network與Container，通常和docker-compose down搭配，習慣上會再加一個-d的參數，讓它在背景執行</td>
</tr>
<tr>
<td>logs</td>
<td>docker-compose logs / docker-compose logs -f</td>
<td>查看Service輸出的日誌，可以加-f來持續輸出Log，或者使用加 –tail=數字，來指定輸出的Log行數</td>
</tr>
<tr>
<td>rm</td>
<td>docker-compose rm / docker-compose rm -v</td>
<td>刪除「已停止」的Container，若加上-v後，則會把此Container相關的Volume一併刪除</td>
</tr>
<tr>
<td>exec</td>
<td>docker-compose exec &lt; service name&gt; bash</td>
<td>和docker exec的差不多，可以進入容器內執行相關指令與操作，例如以本文的官方範例來看，你可以執行 docker-compose exec db bash進入db這個Service的容器內，如果你是用docker指令的話，則可以使用docker exec -it 容器ID/Name bash</td>
</tr>
</tbody></table>
<h1 id="相關資料"><a href="#相關資料" class="headerlink" title="相關資料"></a>相關資料</h1><h2 id="參考資料："><a href="#參考資料：" class="headerlink" title="參考資料："></a>參考資料：</h2><ul>
<li><a target="_blank" rel="noopener" href="https://redirect.viglink.com/?format=go&jsonp=vglnk_161786368512338&key=0d3176c012db018d69225ad1c36210fa&libId=kn8bvjd60100yf72000DLkwb9z6ro&subId=797bc0837bb6664cf2ac57bc1b4fb689&cuid=797bc0837bb6664cf2ac57bc1b4fb689&loc=https://www.jinnsblog.com/2020/12/docker-compose-tutorial.html&v=1&out=https://docs.microsoft.com/zh-tw/visualstudio/docker/tutorials/use-docker-compose&ref=https://www.jinnsblog.com/2018/12/docker-dockerfile-guide.html&title=Docker%20Compose%20-%20%E5%AE%89%E8%A3%9D%E6%95%99%E5%AD%B8%E3%80%81%E6%8C%87%E4%BB%A4%E7%94%A8%E6%B3%95%E5%8F%8A%E5%AE%98%E6%96%B9%E7%AF%84%E4%BE%8B%E8%AA%AA%E6%98%8E%20-%20%E9%9D%96%EF%BC%8E%E6%8A%80%E5%A0%B4&txt=VS%20Code%20%E4%BD%BF%E7%94%A8%E8%80%85%E7%9A%84%20Docker%20%E7%B0%A1%E4%BB%8B%20%E2%80%93%20%E7%AC%AC7%E9%83%A8%E5%88%86%20%E4%BD%BF%E7%94%A8%20Docker%20Compose">VS Code 使用者的 Docker 簡介 – 第7部分 使用 Docker Compose</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/compose-spec/compose-spec/blob/master/spec.md">The Compose Specification</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/reference/overview/">Overview of docker-compose CLI</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jinnsblog.com/2020/12/docker-compose-tutorial.html">Docker Compose – 安裝教學、指令用法及官方範例說明 - 魏子靖</a></li>
</ul>
<h2 id="延伸閱讀："><a href="#延伸閱讀：" class="headerlink" title="延伸閱讀："></a>延伸閱讀：</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.jinnsblog.com/2018/08/docker-commands-newbie-guide.html">Docker – 新手入門，快速安裝與基本指令介紹</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jinnsblog.com/2018/10/docker-container-command.html">Docker Container 指令：Docker run &amp; Docker exec</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jinnsblog.com/2018/12/docker-dockerfile-guide.html">Docker – Dockerfile 指令教學，含範例解說</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Docker/" rel="tag"># Docker</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/04/07/docker-dockerfile-guide/" rel="prev" title="Dockerfile指令教學">
      <i class="fa fa-chevron-left"></i> Dockerfile指令教學
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/04/08/turtle-soup/" rel="next" title="海龜湯 遊戲蒐集">
      海龜湯 遊戲蒐集 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%98%E6%96%B9%E7%AF%84%E4%BE%8B"><span class="nav-number">1.</span> <span class="nav-text">官方範例</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%9DDocker-Compose"><span class="nav-number">2.</span> <span class="nav-text">安裝Docker Compose</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A0%82%E7%B4%9A%E5%B1%A4%E7%B4%9A%E5%85%83%E7%B4%A0-top-level-element"><span class="nav-number">3.</span> <span class="nav-text">頂級層級元素(top-level element)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#version"><span class="nav-number">3.1.</span> <span class="nav-text">version</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#services"><span class="nav-number">3.2.</span> <span class="nav-text">services</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#image"><span class="nav-number">3.2.1.</span> <span class="nav-text">image</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#volumes"><span class="nav-number">3.2.2.</span> <span class="nav-text">volumes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#restart"><span class="nav-number">3.2.3.</span> <span class="nav-text">restart</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#environment"><span class="nav-number">3.2.4.</span> <span class="nav-text">environment</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#depends-on"><span class="nav-number">3.2.5.</span> <span class="nav-text">depends_on</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ports"><span class="nav-number">3.2.6.</span> <span class="nav-text">ports</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#networks"><span class="nav-number">3.3.</span> <span class="nav-text">networks</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#volumes-1"><span class="nav-number">3.4.</span> <span class="nav-text">volumes</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker-Compose-%E5%8B%95%E6%89%8B%E5%81%9A%E5%81%9A%E7%9C%8B"><span class="nav-number">4.</span> <span class="nav-text">Docker Compose 動手做做看</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%85%88%E5%BB%BA%E7%AB%8B%E4%B8%80%E5%80%8B%E5%B0%88%E6%A1%88%E8%B3%87%E6%96%99%E5%A4%BE"><span class="nav-number">4.1.</span> <span class="nav-text">1.先建立一個專案資料夾</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E7%B7%A8%E8%BC%AFdocker-compose-yml"><span class="nav-number">4.2.</span> <span class="nav-text">2.編輯docker-compose.yml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%9F%B7%E8%A1%8Cdocker-compose-yml"><span class="nav-number">4.3.</span> <span class="nav-text">3.執行docker-compose.yml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E9%80%A3%E7%B7%9A%E8%87%B3-WordPress"><span class="nav-number">4.4.</span> <span class="nav-text">4.連線至 WordPress</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E6%9F%A5%E7%9C%8B%E7%B6%B2%E8%B7%AF%E8%B3%87%E8%A8%8A"><span class="nav-number">4.5.</span> <span class="nav-text">5.查看網路資訊</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E6%9F%A5%E7%9C%8B%E8%B3%87%E6%96%99%E6%8E%9B%E8%BC%89%E7%9A%84%E8%B3%87%E6%96%99%E5%A4%BE"><span class="nav-number">4.6.</span> <span class="nav-text">6.查看資料掛載的資料夾</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E5%88%AA%E9%99%A4Container%E5%BE%8C%E8%B3%87%E6%96%99%E9%82%84%E5%9C%A8%E5%97%8E%EF%BC%9F"><span class="nav-number">4.7.</span> <span class="nav-text">7.刪除Container後資料還在嗎？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-%E9%87%8D%E6%96%B0%E5%9F%B7%E8%A1%8CContainer%E5%BE%8C%E8%B3%87%E6%96%99%E6%98%AF%E5%90%A6%E6%9C%83%E6%AD%A3%E5%B8%B8%EF%BC%9F"><span class="nav-number">4.8.</span> <span class="nav-text">8.重新執行Container後資料是否會正常？</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker-Compose-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E5%88%97%E8%A1%A8"><span class="nav-number">5.</span> <span class="nav-text">Docker Compose 常用指令列表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9B%B8%E9%97%9C%E8%B3%87%E6%96%99"><span class="nav-number">6.</span> <span class="nav-text">相關資料</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99%EF%BC%9A"><span class="nav-number">6.1.</span> <span class="nav-text">參考資料：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BB%B6%E4%BC%B8%E9%96%B1%E8%AE%80%EF%BC%9A"><span class="nav-number">6.2.</span> <span class="nav-text">延伸閱讀：</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Joey Liao</p>
  <div class="site-description" itemprop="description">隨意紀錄網路上看到的大神文章，僅供自己使用</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-fish"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Joey Liao</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  















    <div id="pjax">
  

  

    </div>
</body>
</html>
